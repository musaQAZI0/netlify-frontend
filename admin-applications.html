<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Partnership Applications - CROWD Admin</title>
    <link rel="stylesheet" href="admin-applications.css">
    <link href="https://fonts.googleapis.com/css2?family=Neue+Plak:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Admin Navigation -->
    <header class="admin-header">
        <nav class="admin-nav">
            <div class="admin-nav-container">
                <div class="admin-nav-left">
                    <a href="index.html" class="admin-logo">
                        <span class="admin-logo-text">CROWD</span>
                        <span class="admin-badge">ADMIN</span>
                    </a>
                    <div class="admin-nav-links">
                        <a href="dashboard-home.html" class="admin-nav-link">
                            <i class="fas fa-chart-line"></i> Dashboard
                        </a>
                        <a href="#" class="admin-nav-link admin-nav-link--active">
                            <i class="fas fa-handshake"></i> Applications
                        </a>
                        <a href="analytics.html" class="admin-nav-link">
                            <i class="fas fa-analytics"></i> Analytics
                        </a>
                        <a href="settings.html" class="admin-nav-link">
                            <i class="fas fa-cog"></i> Settings
                        </a>
                    </div>
                </div>
                <div class="admin-nav-right">
                    <div class="admin-user-menu">
                        <button class="admin-user-avatar" id="userAvatarBtn">
                            <span id="userInitials">A</span>
                        </button>
                        <div class="admin-dropdown" id="userDropdown">
                            <div class="admin-dropdown-content">
                                <div class="admin-dropdown-header">
                                    <div class="admin-user-info">
                                        <div class="admin-user-name" id="userName">Admin User</div>
                                        <div class="admin-user-email" id="userEmail">admin@crowd.com</div>
                                    </div>
                                </div>
                                <div class="admin-dropdown-divider"></div>
                                <a href="monetize.html" class="admin-dropdown-item">
                                    <i class="fas fa-eye"></i>View Public Site
                                </a>
                                <button class="admin-dropdown-item admin-dropdown-item--danger" id="logoutBtn">
                                    <i class="fas fa-sign-out-alt"></i>Log Out
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="admin-main">
        <!-- Stats Overview -->
        <section class="admin-stats-section">
            <div class="admin-container">
                <h1 class="admin-page-title">Partnership Applications</h1>
                <div class="admin-stats-grid">
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon admin-stat-icon--total">
                            <i class="fas fa-clipboard-list"></i>
                        </div>
                        <div class="admin-stat-content">
                            <div class="admin-stat-number" id="totalApplications">-</div>
                            <div class="admin-stat-label">Total Applications</div>
                        </div>
                    </div>
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon admin-stat-icon--pending">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="admin-stat-content">
                            <div class="admin-stat-number" id="pendingApplications">-</div>
                            <div class="admin-stat-label">Pending Review</div>
                        </div>
                    </div>
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon admin-stat-icon--approved">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="admin-stat-content">
                            <div class="admin-stat-number" id="approvedApplications">-</div>
                            <div class="admin-stat-label">Approved</div>
                        </div>
                    </div>
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon admin-stat-icon--revenue">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <div class="admin-stat-content">
                            <div class="admin-stat-number" id="monthlyRevenue">$0</div>
                            <div class="admin-stat-label">Est. Monthly Revenue</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Filters & Actions -->
        <section class="admin-filters-section">
            <div class="admin-container">
                <div class="admin-filters-bar">
                    <div class="admin-filters-left">
                        <div class="admin-filter-group">
                            <select id="typeFilter" class="admin-select">
                                <option value="">All Types</option>
                                <option value="influencer">Influencers</option>
                                <option value="venue">Venues</option>
                            </select>
                        </div>
                        <div class="admin-filter-group">
                            <select id="statusFilter" class="admin-select">
                                <option value="">All Status</option>
                                <option value="pending">Pending</option>
                                <option value="under_review">Under Review</option>
                                <option value="approved">Approved</option>
                                <option value="rejected">Rejected</option>
                                <option value="needs_info">Needs Info</option>
                            </select>
                        </div>
                        <div class="admin-filter-group">
                            <input type="text" id="searchInput" class="admin-search-input" placeholder="Search applications...">
                        </div>
                    </div>
                    <div class="admin-filters-right">
                        <button class="admin-btn admin-btn--secondary" id="exportBtn">
                            <i class="fas fa-download"></i> Export CSV
                        </button>
                        <button class="admin-btn admin-btn--primary" id="refreshBtn">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Applications Table -->
        <section class="admin-applications-section">
            <div class="admin-container">
                <div class="admin-card">
                    <div class="admin-card-header">
                        <h2 class="admin-card-title">Applications</h2>
                        <div class="admin-card-actions">
                            <span class="admin-results-count" id="resultsCount">0 applications</span>
                        </div>
                    </div>
                    <div class="admin-card-body">
                        <!-- Loading State -->
                        <div class="admin-loading" id="applicationsLoading">
                            <div class="admin-loading-spinner"></div>
                            <p>Loading applications...</p>
                        </div>

                        <!-- Applications Table -->
                        <div class="admin-table-container" id="applicationsTable" style="display: none;">
                            <table class="admin-table">
                                <thead>
                                    <tr>
                                        <th>Applicant</th>
                                        <th>Type</th>
                                        <th>Status</th>
                                        <th>Submitted</th>
                                        <th>Contact</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="applicationsTableBody">
                                    <!-- Applications will be loaded here -->
                                </tbody>
                            </table>
                        </div>

                        <!-- Empty State -->
                        <div class="admin-empty-state" id="emptyState" style="display: none;">
                            <div class="admin-empty-icon">
                                <i class="fas fa-clipboard-list"></i>
                            </div>
                            <h3>No Applications Found</h3>
                            <p>No partnership applications match your current filters.</p>
                        </div>
                    </div>
                </div>

                <!-- Pagination -->
                <div class="admin-pagination" id="pagination" style="display: none;">
                    <button class="admin-btn admin-btn--ghost" id="prevPage" disabled>
                        <i class="fas fa-chevron-left"></i> Previous
                    </button>
                    <div class="admin-page-info">
                        <span id="pageInfo">Page 1 of 1</span>
                    </div>
                    <button class="admin-btn admin-btn--ghost" id="nextPage" disabled>
                        Next <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
        </section>
    </main>

    <!-- Application Detail Modal -->
    <div class="admin-modal" id="applicationModal" style="display: none;">
        <div class="admin-modal-backdrop" onclick="closeApplicationModal()"></div>
        <div class="admin-modal-container">
            <div class="admin-modal-content">
                <!-- Modal Header -->
                <div class="admin-modal-header">
                    <h2 class="admin-modal-title" id="modalTitle">Application Details</h2>
                    <button class="admin-modal-close" onclick="closeApplicationModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>

                <!-- Application Details -->
                <div class="admin-modal-body" id="applicationDetails">
                    <!-- Content will be loaded dynamically -->
                </div>

                <!-- Status Update Section -->
                <div class="admin-modal-footer">
                    <div class="admin-status-update">
                        <div class="admin-status-controls">
                            <label class="admin-form-label">Update Status:</label>
                            <select id="statusSelect" class="admin-select">
                                <option value="pending">Pending Review</option>
                                <option value="under_review">Under Review</option>
                                <option value="approved">Approved</option>
                                <option value="rejected">Rejected</option>
                                <option value="needs_info">Needs Information</option>
                            </select>
                        </div>
                        <div class="admin-notes-section">
                            <label class="admin-form-label">Admin Notes:</label>
                            <textarea id="adminNotes" class="admin-textarea" rows="3" placeholder="Add notes for the applicant..."></textarea>
                        </div>
                        <div class="admin-partnership-terms" id="partnershipTerms" style="display: none;">
                            <h4>Partnership Terms (for approved applications)</h4>
                            <div class="admin-terms-grid">
                                <div class="admin-form-group">
                                    <label class="admin-form-label">Commission Rate (%):</label>
                                    <input type="number" id="commissionRate" class="admin-input" step="0.1" min="0" max="100">
                                </div>
                                <div class="admin-form-group">
                                    <label class="admin-form-label">Minimum Revenue ($):</label>
                                    <input type="number" id="minimumRevenue" class="admin-input" min="0">
                                </div>
                                <div class="admin-form-group">
                                    <label class="admin-form-label">Contract Duration (months):</label>
                                    <input type="number" id="contractDuration" class="admin-input" min="1">
                                </div>
                            </div>
                        </div>
                        <div class="admin-modal-actions">
                            <button class="admin-btn admin-btn--ghost" onclick="closeApplicationModal()">Cancel</button>
                            <button class="admin-btn admin-btn--primary" id="updateStatusBtn">
                                <i class="fas fa-save"></i> Update Application
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="admin-success-modal" id="successModal" style="display: none;">
        <div class="admin-modal-backdrop"></div>
        <div class="admin-success-content">
            <div class="admin-success-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h3 class="admin-success-title">Status Updated!</h3>
            <p class="admin-success-message">The application status has been updated successfully.</p>
            <button class="admin-btn admin-btn--primary" onclick="closeSuccessModal()">Continue</button>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="admin-loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="admin-loading-spinner"></div>
        <p class="admin-loading-text">Updating application...</p>
    </div>

    <script src="js/auth-api.js"></script>
    <script src="admin-applications.js"></script>
</body>
</html>