<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Collection - Crowd</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Benton Sans", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", Helvetica, Tahoma, Arial, sans-serif;
            background-color: #f8f7fa;
            color: #39364f;
            line-height: 1.5;
        }

        /* Eventbrite Header */
        .header {
            background: #fff;
            border-bottom: 1px solid #e6e4ea;
            padding: 0;
            height: 80px;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .header-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 100%;
            padding: 0 24px;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 32px;
        }

        .logo {
            font-size: 32px;
            font-weight: 700;
            color: #f05537;
            text-decoration: none;
            letter-spacing: -1px;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #6f7287;
            font-size: 14px;
        }

        .breadcrumb a {
            color: #3659e3;
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .btn-secondary {
            padding: 12px 24px;
            background: #fff;
            color: #39364f;
            border: 1px solid #d9d8dd;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-secondary:hover {
            background: #f8f7fa;
            border-color: #c9c8cd;
        }

        .btn-primary {
            padding: 12px 24px;
            background: #d1410c;
            color: #fff;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary:hover {
            background: #b8370a;
        }

        .btn-primary:disabled {
            background: #c9c8cd;
            cursor: not-allowed;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            padding: 8px;
            border-radius: 50px;
            transition: background 0.2s;
        }

        .user-menu:hover {
            background: #f8f7fa;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
        }

        /* Main Layout */
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            min-height: calc(100vh - 80px);
        }

        /* Progress Sidebar */
        .progress-sidebar {
            width: 320px;
            background: #fff;
            padding: 32px 24px;
            border-right: 1px solid #e6e4ea;
        }

        .collection-header {
            margin-bottom: 32px;
        }

        .collection-status {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 4px 12px;
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 16px;
            font-size: 12px;
            font-weight: 600;
            color: #856404;
            margin-bottom: 12px;
        }

        .collection-title {
            font-size: 24px;
            font-weight: 700;
            color: #1e0a3c;
            margin-bottom: 4px;
        }

        .collection-subtitle {
            font-size: 14px;
            color: #6f7287;
        }

        .progress-steps {
            list-style: none;
        }

        .progress-step {
            display: flex;
            align-items: flex-start;
            gap: 16px;
            padding: 16px 0;
            cursor: pointer;
            transition: all 0.2s;
            border-radius: 8px;
            margin-bottom: 4px;
            padding-left: 12px;
            padding-right: 12px;
        }

        .progress-step:hover {
            background: #f8f7fa;
        }

        .progress-step.active {
            background: #e8f2ff;
            color: #1e0a3c;
        }

        .progress-step.completed {
            color: #219653;
        }

        .step-number {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #e6e4ea;
            color: #6f7287;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
            flex-shrink: 0;
        }

        .progress-step.active .step-number {
            background: #3659e3;
            color: #fff;
        }

        .progress-step.completed .step-number {
            background: #219653;
            color: #fff;
        }

        .step-content {
            flex: 1;
        }

        .step-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .step-description {
            font-size: 14px;
            color: #6f7287;
        }

        /* Main Content Area */
        .content-area {
            flex: 1;
            background: #fff;
            padding: 40px 48px;
            overflow-y: auto;
        }

        .content-header {
            margin-bottom: 32px;
        }

        .content-title {
            font-size: 32px;
            font-weight: 700;
            color: #1e0a3c;
            margin-bottom: 8px;
        }

        .content-subtitle {
            font-size: 16px;
            color: #6f7287;
            line-height: 1.6;
        }

        /* Step Content Sections */
        .step-section {
            display: none;
        }

        .step-section.active {
            display: block;
        }

        /* Event Selection Step */
        .search-container {
            margin-bottom: 32px;
        }

        .search-box {
            position: relative;
            max-width: 600px;
        }

        .search-input {
            width: 100%;
            padding: 16px 20px 16px 48px;
            border: 2px solid #d9d8dd;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.2s;
        }

        .search-input:focus {
            outline: none;
            border-color: #3659e3;
            box-shadow: 0 0 0 3px rgba(54, 89, 227, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: #6f7287;
        }

        .filter-tabs {
            display: flex;
            gap: 24px;
            margin-bottom: 24px;
            border-bottom: 1px solid #e6e4ea;
        }

        .filter-tab {
            padding: 12px 0;
            color: #6f7287;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }

        .filter-tab.active {
            color: #3659e3;
            border-bottom-color: #3659e3;
        }

        .filter-tab:hover {
            color: #3659e3;
        }

        .events-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .event-card {
            border: 1px solid #e6e4ea;
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.2s;
            background: #fff;
            cursor: pointer;
        }

        .event-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-color: #d9d8dd;
        }

        .event-card.selected {
            border-color: #3659e3;
            box-shadow: 0 0 0 2px rgba(54, 89, 227, 0.1);
        }

        .event-image {
            width: 100%;
            height: 160px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            position: relative;
            overflow: hidden;
        }

        .event-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .event-date-badge {
            position: absolute;
            top: 12px;
            left: 12px;
            background: #fff;
            padding: 8px 12px;
            border-radius: 6px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .event-month {
            font-size: 10px;
            font-weight: 600;
            color: #d1410c;
            text-transform: uppercase;
            line-height: 1;
        }

        .event-day {
            font-size: 18px;
            font-weight: 700;
            color: #1e0a3c;
            line-height: 1;
        }

        .event-status-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            padding: 4px 8px;
            background: rgba(0, 0, 0, 0.7);
            color: #fff;
            font-size: 11px;
            font-weight: 600;
            border-radius: 4px;
            text-transform: uppercase;
        }

        .event-details {
            padding: 20px;
        }

        .event-title {
            font-size: 16px;
            font-weight: 600;
            color: #1e0a3c;
            margin-bottom: 8px;
            line-height: 1.3;
        }

        .event-meta {
            display: flex;
            flex-direction: column;
            gap: 4px;
            margin-bottom: 12px;
        }

        .event-datetime {
            font-size: 14px;
            color: #6f7287;
        }

        .event-location {
            font-size: 14px;
            color: #6f7287;
        }

        .event-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            color: #6f7287;
        }

        .event-price {
            font-weight: 600;
            color: #1e0a3c;
        }

        .event-selection-checkbox {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 24px;
            height: 24px;
            border: 2px solid #fff;
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: all 0.2s;
        }

        .event-card:hover .event-selection-checkbox,
        .event-card.selected .event-selection-checkbox {
            opacity: 1;
        }

        .event-card.selected .event-selection-checkbox {
            background: #3659e3;
            border-color: #3659e3;
            color: #fff;
        }

        .selected-events-summary {
            background: #f8f7fa;
            border: 1px solid #e6e4ea;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 32px;
        }

        .summary-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .summary-title {
            font-size: 18px;
            font-weight: 600;
            color: #1e0a3c;
        }

        .clear-selection {
            color: #3659e3;
            font-size: 14px;
            cursor: pointer;
            text-decoration: none;
        }

        .clear-selection:hover {
            text-decoration: underline;
        }

        .selected-events-list {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }

        .selected-event-tag {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: #fff;
            border: 1px solid #d9d8dd;
            border-radius: 20px;
            font-size: 14px;
        }

        .remove-event {
            color: #6f7287;
            cursor: pointer;
            font-size: 16px;
            line-height: 1;
        }

        .remove-event:hover {
            color: #d1410c;
        }

        /* Collection Details Step */
        .form-section {
            margin-bottom: 40px;
        }

        .section-header {
            margin-bottom: 24px;
        }

        .section-title {
            font-size: 24px;
            font-weight: 600;
            color: #1e0a3c;
            margin-bottom: 8px;
        }

        .section-description {
            font-size: 16px;
            color: #6f7287;
            line-height: 1.6;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #39364f;
            margin-bottom: 8px;
        }

        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #d9d8dd;
            border-radius: 4px;
            font-size: 16px;
            transition: all 0.2s;
        }

        .form-input:focus {
            outline: none;
            border-color: #3659e3;
            box-shadow: 0 0 0 3px rgba(54, 89, 227, 0.1);
        }

        .form-textarea {
            width: 100%;
            min-height: 120px;
            padding: 12px 16px;
            border: 1px solid #d9d8dd;
            border-radius: 4px;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
            transition: all 0.2s;
        }

        .form-textarea:focus {
            outline: none;
            border-color: #3659e3;
            box-shadow: 0 0 0 3px rgba(54, 89, 227, 0.1);
        }

        .char-counter {
            text-align: right;
            font-size: 12px;
            color: #6f7287;
            margin-top: 4px;
        }

        .image-upload-area {
            border: 2px dashed #d9d8dd;
            border-radius: 8px;
            padding: 48px 24px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .image-upload-area:hover {
            border-color: #3659e3;
            background: #f8f9ff;
        }

        .image-upload-area.has-image {
            border-style: solid;
            padding: 0;
            background: none;
        }

        .upload-preview {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 6px;
        }

        .upload-placeholder {
            color: #6f7287;
        }

        .upload-icon {
            width: 48px;
            height: 48px;
            margin: 0 auto 16px;
            opacity: 0.5;
        }

        .upload-title {
            font-size: 18px;
            font-weight: 600;
            color: #39364f;
            margin-bottom: 8px;
        }

        .upload-subtitle {
            font-size: 14px;
            color: #6f7287;
        }

        /* Settings Step */
        .settings-section {
            margin-bottom: 32px;
        }

        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
        }

        .setting-card {
            border: 1px solid #e6e4ea;
            border-radius: 8px;
            padding: 24px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .setting-card:hover {
            border-color: #3659e3;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .setting-card.selected {
            border-color: #3659e3;
            background: #f8f9ff;
        }

        .setting-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .setting-title {
            font-size: 16px;
            font-weight: 600;
            color: #1e0a3c;
        }

        .setting-radio {
            width: 20px;
            height: 20px;
            border: 2px solid #d9d8dd;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .setting-card.selected .setting-radio {
            border-color: #3659e3;
        }

        .setting-card.selected .setting-radio::after {
            content: '';
            width: 10px;
            height: 10px;
            background: #3659e3;
            border-radius: 50%;
        }

        .setting-description {
            font-size: 14px;
            color: #6f7287;
            line-height: 1.5;
        }

        .url-preview {
            background: #f8f7fa;
            border: 1px solid #e6e4ea;
            border-radius: 8px;
            padding: 20px;
            margin-top: 24px;
        }

        .url-label {
            font-size: 14px;
            font-weight: 600;
            color: #39364f;
            margin-bottom: 8px;
        }

        .url-display {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            color: #3659e3;
            background: #fff;
            padding: 12px;
            border-radius: 4px;
            border: 1px solid #d9d8dd;
            word-break: break-all;
        }

        /* Publish Step */
        .publish-preview {
            border: 1px solid #e6e4ea;
            border-radius: 8px;
            padding: 32px;
            margin-bottom: 32px;
            text-align: center;
            background: #fff;
        }

        .preview-image {
            width: 100%;
            max-width: 400px;
            height: 200px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 8px;
            margin: 0 auto 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-size: 18px;
        }

        .preview-title {
            font-size: 28px;
            font-weight: 700;
            color: #1e0a3c;
            margin-bottom: 8px;
        }

        .preview-subtitle {
            font-size: 16px;
            color: #6f7287;
            margin-bottom: 16px;
        }

        .preview-actions {
            display: flex;
            justify-content: center;
            gap: 16px;
        }

        .btn-outline {
            padding: 12px 24px;
            background: #fff;
            color: #3659e3;
            border: 1px solid #3659e3;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.2s;
        }

        .btn-outline:hover {
            background: #3659e3;
            color: #fff;
        }

        .checklist {
            list-style: none;
            margin-bottom: 32px;
        }

        .checklist-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .checklist-item:last-child {
            border-bottom: none;
        }

        .checklist-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
        }

        .checklist-item.completed .checklist-icon {
            background: #219653;
            color: #fff;
        }

        .checklist-item.pending .checklist-icon {
            background: #f39c12;
            color: #fff;
        }

        .checklist-text {
            font-size: 14px;
            color: #39364f;
        }

        .footer-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 24px;
            border-top: 1px solid #e6e4ea;
            margin-top: 32px;
        }

        .btn-text {
            background: none;
            border: none;
            color: #3659e3;
            font-size: 14px;
            cursor: pointer;
            text-decoration: none;
        }

        .btn-text:hover {
            text-decoration: underline;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .main-container {
                flex-direction: column;
            }

            .progress-sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid #e6e4ea;
            }

            .content-area {
                padding: 24px;
            }

            .events-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .header-container {
                padding: 0 16px;
            }

            .header-left {
                gap: 16px;
            }

            .breadcrumb {
                display: none;
            }

            .content-area {
                padding: 16px;
            }

            .content-title {
                font-size: 24px;
            }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
    <script src="js/upload-manager.js"></script>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <div class="header-left">
                <a href="index.html" class="logo">crowd</a>
                <nav class="breadcrumb">
                    <a href="#">Manage Events</a>
                    <span>›</span>
                    <span>Create Collection</span>
                </nav>
            </div>
            <div class="header-actions">
                <button class="btn-secondary" onclick="saveAsDraft()">Save as draft</button>
                <button class="btn-primary" id="publishBtn" onclick="publishCollection()" disabled>Publish
                    collection</button>
                <div class="user-menu">
                    <div class="user-avatar">JS</div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Progress Sidebar -->
        <aside class="progress-sidebar">
            <div class="collection-header">
                <div class="collection-status">
                    <span>●</span>
                    Draft
                </div>
                <h2 class="collection-title" id="collectionTitleDisplay">Untitled Collection</h2>
                <p class="collection-subtitle" id="selectedEventsCount">0 events selected</p>
            </div>

            <ul class="progress-steps">
                <li class="progress-step active" data-step="1" onclick="goToStep(1)">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <div class="step-title">Select events</div>
                        <div class="step-description">Choose events for your collection</div>
                    </div>
                </li>
                <li class="progress-step" data-step="2" onclick="goToStep(2)">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <div class="step-title">Collection details</div>
                        <div class="step-description">Add title, description, and image</div>
                    </div>
                </li>
                <li class="progress-step" data-step="3" onclick="goToStep(3)">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <div class="step-title">Settings</div>
                        <div class="step-description">Configure visibility and URL</div>
                    </div>
                </li>
                <li class="progress-step" data-step="4" onclick="goToStep(4)">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <div class="step-title">Publish</div>
                        <div class="step-description">Review and publish collection</div>
                    </div>
                </li>
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="content-area">
            <!-- Step 1: Select Events -->
            <div id="step1" class="step-section active">
                <div class="content-header">
                    <h1 class="content-title">Select events for your collection</h1>
                    <p class="content-subtitle">Choose which events to include in your collection. You can select
                        published events, drafts, or events from series.</p>
                </div>

                <div class="search-container">
                    <div class="search-box">
                        <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8" />
                            <path d="m21 21-4.35-4.35" />
                        </svg>
                        <input type="text" class="search-input" placeholder="Search your events..." id="eventSearch">
                    </div>
                </div>

                <div class="filter-tabs">
                    <div class="filter-tab active" data-filter="all" onclick="filterEvents('all')">All events (12)</div>
                    <div class="filter-tab" data-filter="published" onclick="filterEvents('published')">Published (8)
                    </div>
                    <div class="filter-tab" data-filter="draft" onclick="filterEvents('draft')">Drafts (4)</div>
                    <div class="filter-tab" data-filter="series" onclick="filterEvents('series')">Series (2)</div>
                </div>

                <div id="selectedEventsBar" class="selected-events-summary" style="display: none;">
                    <div class="summary-header">
                        <h3 class="summary-title"><span id="selectedCount">0</span> events selected</h3>
                        <a href="#" class="clear-selection" onclick="clearSelection()">Clear selection</a>
                    </div>
                    <div id="selectedEventsList" class="selected-events-list"></div>
                </div>

                <div class="events-grid" id="eventsGrid">
                    <!-- Events will be populated by JavaScript -->
                </div>
            </div>

            <!-- Step 2: Collection Details -->
            <div id="step2" class="step-section">
                <div class="content-header">
                    <h1 class="content-title">Add details to your collection</h1>
                    <p class="content-subtitle">Give your collection a compelling title and description to help people
                        discover and understand what it's about.</p>
                </div>

                <div class="form-section">
                    <div class="section-header">
                        <h2 class="section-title">Basic information</h2>
                        <p class="section-description">This information will appear at the top of your collection page.
                        </p>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="collectionTitle">Collection title *</label>
                        <input type="text" class="form-input" id="collectionTitle" placeholder="Enter collection title"
                            maxlength="75" oninput="updateCollectionTitle()">
                        <div class="char-counter"><span id="titleCharCount">0</span>/75</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="collectionDescription">Collection description</label>
                        <textarea class="form-textarea" id="collectionDescription"
                            placeholder="Describe what this collection is about..." maxlength="2000"
                            oninput="updateDescription()"></textarea>
                        <div class="char-counter"><span id="descCharCount">0</span>/2000</div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="section-header">
                        <h2 class="section-title">Collection image</h2>
                        <p class="section-description">Upload an image to represent your collection. This will be
                            displayed prominently on your collection page.</p>
                    </div>

                    <div class="image-upload-area" id="imageUploadArea" onclick="triggerImageUpload()">
                        <div class="upload-placeholder" id="uploadPlaceholder">
                            <svg class="upload-icon" viewBox="0 0 48 48" fill="currentColor">
                                <path
                                    d="M38 12H28l-4-4H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V16c0-2.21-1.79-4-4-4zm-8 18c0 2.21-1.79 4-4 4s-4-1.79-4-4 1.79-4 4-4 4 1.79 4 4z" />
                            </svg>
                            <div class="upload-title">Upload collection image</div>
                            <div class="upload-subtitle">Drag and drop or click to browse (JPG, PNG, GIF up to 10MB)
                            </div>
                        </div>
                        <img id="imagePreview" class="upload-preview" style="display: none;">
                    </div>
                    <input type="file" id="imageInput" accept="image/*" style="display: none;"
                        onchange="handleImageUpload(event)">
                </div>

                <div class="form-section">
                    <div class="section-header">
                        <h2 class="section-title">Organizer information</h2>
                        <p class="section-description">Select which organizer profile will be associated with this
                            collection.</p>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="organizerSelect">Organizer *</label>
                        <select class="form-input" id="organizerSelect">
                            <option value="default">Jalal Sherazi</option>
                            <option value="company">Tech Events Inc.</option>
                            <option value="other">Community Organizers</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Step 3: Settings -->
            <div id="step3" class="step-section">
                <div class="content-header">
                    <h1 class="content-title">Configure collection settings</h1>
                    <p class="content-subtitle">Choose how your collection appears and who can discover it.</p>
                </div>

                <div class="settings-section">
                    <div class="section-header">
                        <h2 class="section-title">Privacy & Discovery</h2>
                        <p class="section-description">Control who can see and find your collection.</p>
                    </div>

                    <div class="settings-grid">
                        <div class="setting-card selected" data-setting="public"
                            onclick="selectSetting(this, 'public')">
                            <div class="setting-header">
                                <h3 class="setting-title">Public</h3>
                                <div class="setting-radio"></div>
                            </div>
                            <p class="setting-description">Anyone can find your collection through search engines and
                                Eventbrite. Your collection will appear in public listings.</p>
                        </div>

                        <div class="setting-card" data-setting="unlisted" onclick="selectSetting(this, 'unlisted')">
                            <div class="setting-header">
                                <h3 class="setting-title">Unlisted</h3>
                                <div class="setting-radio"></div>
                            </div>
                            <p class="setting-description">Only people with the direct link can access your collection.
                                It won't appear in search results or public listings.</p>
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <div class="section-header">
                        <h2 class="section-title">Collection URL</h2>
                        <p class="section-description">Customize your collection's web address.</p>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="urlSlug">Custom URL (optional)</label>
                        <input type="text" class="form-input" id="urlSlug" placeholder="my-awesome-events"
                            oninput="updateURL()">
                    </div>

                    <div class="url-preview">
                        <div class="url-label">Your collection will be available at:</div>
                        <div class="url-display" id="urlDisplay">https://www.crowd.com/cc/untitled-collection-987654
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <div class="section-header">
                        <h2 class="section-title">Social sharing</h2>
                        <p class="section-description">Control how your collection appears when shared on social media.
                        </p>
                    </div>

                    <div class="settings-grid">
                        <div class="setting-card selected" data-setting="auto" onclick="selectSetting(this, 'auto')">
                            <div class="setting-header">
                                <h3 class="setting-title">Auto-generate</h3>
                                <div class="setting-radio"></div>
                            </div>
                            <p class="setting-description">Crowd will automatically create social media previews using
                                your collection image and description.</p>
                        </div>

                        <div class="setting-card" data-setting="custom" onclick="selectSetting(this, 'custom')">
                            <div class="setting-header">
                                <h3 class="setting-title">Custom</h3>
                                <div class="setting-radio"></div>
                            </div>
                            <p class="setting-description">Upload custom images and text specifically for social media
                                sharing.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 4: Publish -->
            <div id="step4" class="step-section">
                <div class="content-header">
                    <h1 class="content-title">Review and publish</h1>
                    <p class="content-subtitle">Review your collection details and publish when you're ready to share it
                        with the world.</p>
                </div>

                <div class="publish-preview">
                    <div class="preview-image" id="publishPreviewImage">Collection Preview</div>
                    <h2 class="preview-title" id="publishPreviewTitle">Untitled Collection</h2>
                    <p class="preview-subtitle" id="publishPreviewSubtitle">0 events • Public collection</p>
                    <div class="preview-actions">
                        <a href="#" class="btn-outline" onclick="previewCollection()">Preview collection</a>
                    </div>
                </div>

                <div class="form-section">
                    <div class="section-header">
                        <h2 class="section-title">Pre-publish checklist</h2>
                        <p class="section-description">Make sure everything is ready before publishing.</p>
                    </div>

                    <ul class="checklist" id="publishChecklist">
                        <li class="checklist-item pending">
                            <div class="checklist-icon">!</div>
                            <span class="checklist-text">Add at least one event to your collection</span>
                        </li>
                        <li class="checklist-item pending">
                            <div class="checklist-icon">!</div>
                            <span class="checklist-text">Give your collection a title</span>
                        </li>
                        <li class="checklist-item completed">
                            <div class="checklist-icon">✓</div>
                            <span class="checklist-text">Configure privacy settings</span>
                        </li>
                        <li class="checklist-item completed">
                            <div class="checklist-icon">✓</div>
                            <span class="checklist-text">Set up collection URL</span>
                        </li>
                    </ul>
                </div>

                <div class="form-section">
                    <div class="section-header">
                        <h2 class="section-title">Marketing features</h2>
                        <p class="section-description">Boost your collection's visibility with these optional features.
                        </p>
                    </div>

                    <div class="settings-grid">
                        <div class="setting-card" data-setting="newsletter" onclick="toggleFeature(this, 'newsletter')">
                            <div class="setting-header">
                                <h3 class="setting-title">Email promotion</h3>
                                <div class="setting-radio"></div>
                            </div>
                            <p class="setting-description">Send an email to your followers announcing this new
                                collection.</p>
                        </div>

                        <div class="setting-card" data-setting="social" onclick="toggleFeature(this, 'social')">
                            <div class="setting-header">
                                <h3 class="setting-title">Social media post</h3>
                                <div class="setting-radio"></div>
                            </div>
                            <p class="setting-description">Automatically create social media posts to promote your
                                collection.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer Actions -->
            <div class="footer-actions">
                <button class="btn-text" id="backBtn" onclick="goToPreviousStep()" style="display: none;">←
                    Back</button>
                <div>
                    <button class="btn-secondary" id="saveBtn" onclick="saveAsDraft()">Save as draft</button>
                    <button class="btn-primary" id="nextBtn" onclick="goToNextStep()">Continue</button>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Global state
        let currentStep = 1;
        let selectedEvents = new Set();
        let collectionData = {
            title: '',
            description: '',
            image: null,
            organizer: 'default',
            privacy: 'public',
            urlSlug: '',
            socialSharing: 'auto',
            features: new Set()
        };

        // Sample events data
        const eventsData = [
            {
                id: 1,
                title: "Tech Conference 2025",
                date: "2025-09-15",
                time: "09:00 AM",
                location: "San Francisco, CA",
                status: "published",
                price: "Free",
                attendees: 250,
                category: "Technology",
                image: null
            },
            {
                id: 2,
                title: "Digital Marketing Workshop",
                date: "2025-09-20",
                time: "02:00 PM",
                location: "Online Event",
                status: "published",
                price: "$49",
                attendees: 89,
                category: "Marketing",
                image: null
            },
            {
                id: 3,
                title: "Startup Networking Mixer",
                date: "2025-09-25",
                time: "06:00 PM",
                location: "Austin, TX",
                status: "draft",
                price: "$25",
                attendees: 0,
                category: "Networking",
                image: null
            },
            {
                id: 4,
                title: "AI & Machine Learning Summit",
                date: "2025-10-05",
                time: "10:00 AM",
                location: "New York, NY",
                status: "published",
                price: "$199",
                attendees: 450,
                category: "Technology",
                image: null
            },
            {
                id: 5,
                title: "Creative Design Bootcamp",
                date: "2025-10-12",
                time: "09:00 AM",
                location: "Los Angeles, CA",
                status: "draft",
                price: "$150",
                attendees: 0,
                category: "Design",
                image: null
            },
            {
                id: 6,
                title: "Business Growth Seminar",
                date: "2025-10-18",
                time: "11:00 AM",
                location: "Chicago, IL",
                status: "published",
                price: "$75",
                attendees: 128,
                category: "Business",
                image: null
            }
        ];

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function () {
            renderEvents();
            updateUI();
        });

        // Event rendering
        function renderEvents(filter = 'all') {
            const grid = document.getElementById('eventsGrid');
            let filteredEvents = eventsData;

            if (filter !== 'all') {
                filteredEvents = eventsData.filter(event => {
                    if (filter === 'published') return event.status === 'published';
                    if (filter === 'draft') return event.status === 'draft';
                    if (filter === 'series') return false; // No series events in sample data
                    return true;
                });
            }

            grid.innerHTML = filteredEvents.map(event => createEventCard(event)).join('');
        }

        function createEventCard(event) {
            const eventDate = new Date(event.date);
            const month = eventDate.toLocaleDateString('en-US', { month: 'short' }).toUpperCase();
            const day = eventDate.getDate();
            const isSelected = selectedEvents.has(event.id);

            return `
                <div class="event-card ${isSelected ? 'selected' : ''}" data-event-id="${event.id}" onclick="toggleEventSelection(${event.id})">
                    <div class="event-image">
                        <div class="event-date-badge">
                            <div class="event-month">${month}</div>
                            <div class="event-day">${day}</div>
                        </div>
                        <div class="event-status-badge">${event.status}</div>
                        <div class="event-selection-checkbox">
                            ${isSelected ? '✓' : ''}
                        </div>
                    </div>
                    <div class="event-details">
                        <h3 class="event-title">${event.title}</h3>
                        <div class="event-meta">
                            <div class="event-datetime">${event.date} at ${event.time}</div>
                            <div class="event-location">${event.location}</div>
                        </div>
                        <div class="event-stats">
                            <span class="event-price">${event.price}</span>
                            <span>${event.attendees} going</span>
                        </div>
                    </div>
                </div>
            `;
        }

        // Event selection
        function toggleEventSelection(eventId) {
            if (selectedEvents.has(eventId)) {
                selectedEvents.delete(eventId);
            } else {
                selectedEvents.add(eventId);
            }
            updateSelectedEventsDisplay();
            updateUI();
            renderEvents();
        }

        function updateSelectedEventsDisplay() {
            const container = document.getElementById('selectedEventsBar');
            const count = document.getElementById('selectedCount');
            const list = document.getElementById('selectedEventsList');

            if (selectedEvents.size === 0) {
                container.style.display = 'none';
                return;
            }

            container.style.display = 'block';
            count.textContent = selectedEvents.size;

            const selectedEventsList = Array.from(selectedEvents).map(id => {
                const event = eventsData.find(e => e.id === id);
                return `
                    <div class="selected-event-tag">
                        ${event.title}
                        <span class="remove-event" onclick="toggleEventSelection(${id}); event.stopPropagation();">×</span>
                    </div>
                `;
            }).join('');

            list.innerHTML = selectedEventsList;
        }

        function clearSelection() {
            selectedEvents.clear();
            updateSelectedEventsDisplay();
            updateUI();
            renderEvents();
        }

        // Filter functionality
        function filterEvents(filter) {
            document.querySelectorAll('.filter-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-filter="${filter}"]`).classList.add('active');
            renderEvents(filter);
        }

        // Search functionality
        document.getElementById('eventSearch').addEventListener('input', function (e) {
            const searchTerm = e.target.value.toLowerCase();
            const eventCards = document.querySelectorAll('.event-card');

            eventCards.forEach(card => {
                const title = card.querySelector('.event-title').textContent.toLowerCase();
                const location = card.querySelector('.event-location').textContent.toLowerCase();

                if (title.includes(searchTerm) || location.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        });

        // Step navigation
        function goToStep(step) {
            if (step < 1 || step > 4) return;

            // Hide all step sections
            document.querySelectorAll('.step-section').forEach(section => {
                section.classList.remove('active');
            });

            // Show target step
            document.getElementById(`step${step}`).classList.add('active');

            // Update progress sidebar
            document.querySelectorAll('.progress-step').forEach(stepEl => {
                stepEl.classList.remove('active');
                const stepNum = parseInt(stepEl.dataset.step);
                if (stepNum < step) {
                    stepEl.classList.add('completed');
                } else {
                    stepEl.classList.remove('completed');
                }
            });

            document.querySelector(`[data-step="${step}"]`).classList.add('active');

            currentStep = step;
            updateFooterButtons();
            updatePublishPreview();
        }

        function goToNextStep() {
            if (currentStep < 4) {
                goToStep(currentStep + 1);
            } else {
                publishCollection();
            }
        }

        function goToPreviousStep() {
            if (currentStep > 1) {
                goToStep(currentStep - 1);
            }
        }

        function updateFooterButtons() {
            const backBtn = document.getElementById('backBtn');
            const nextBtn = document.getElementById('nextBtn');

            backBtn.style.display = currentStep > 1 ? 'block' : 'none';

            if (currentStep === 4) {
                nextBtn.textContent = 'Publish collection';
                nextBtn.className = 'btn-primary';
            } else {
                nextBtn.textContent = 'Continue';
                nextBtn.className = 'btn-primary';
            }
        }

        // Form handling
        function updateCollectionTitle() {
            const input = document.getElementById('collectionTitle');
            const display = document.getElementById('collectionTitleDisplay');
            const counter = document.getElementById('titleCharCount');

            collectionData.title = input.value;
            display.textContent = input.value || 'Untitled Collection';
            counter.textContent = input.value.length;
            updateURL();
            updateUI();
        }

        function updateDescription() {
            const input = document.getElementById('collectionDescription');
            const counter = document.getElementById('descCharCount');

            collectionData.description = input.value;
            counter.textContent = input.value.length;
        }

        function triggerImageUpload() {
            document.getElementById('imageInput').click();
        }

        async function handleImageUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            try {
                const uploadArea = document.getElementById('imageUploadArea');
                const placeholder = document.getElementById('uploadPlaceholder');
                const preview = document.getElementById('imagePreview');

                // Show loading state
                placeholder.innerHTML = '<div style="display: flex; align-items: center; gap: 8px;"><div style="width: 16px; height: 16px; border: 2px solid #d1d5db; border-top-color: #3b82f6; border-radius: 50%; animation: spin 1s linear infinite;"></div>Uploading...</div>';

                // Upload using the upload manager
                const result = await uploadManager.uploadImage(file, {
                    type: 'collection_image',
                    collectionId: collectionData.id || 'temp_' + Date.now()
                });

                // Update collection data
                collectionData.image = result.url;
                collectionData.imageId = result.imageId;
                collectionData.uploadMethod = result.method;

                // Update UI
                placeholder.style.display = 'none';
                preview.src = result.url;
                preview.style.display = 'block';
                uploadArea.classList.add('has-image');

                // Show success message
                showUploadSuccess(result.method);

            } catch (error) {
                console.error('Upload failed:', error);
                alert(`Upload failed: ${error.message}`);
                
                // Reset placeholder
                const placeholder = document.getElementById('uploadPlaceholder');
                placeholder.innerHTML = `
                    <svg class="upload-icon" viewBox="0 0 48 48" fill="currentColor">
                        <path d="M24 8l8 8h-6v8h-4v-8h-6l8-8z"/>
                        <path d="M8 36v-4h32v4H8z"/>
                    </svg>
                    <div class="upload-title">Upload collection image</div>
                    <div class="upload-subtitle">Drag and drop or click to browse (JPG, PNG, GIF up to 10MB)</div>
                `;
            }
        }

        function showUploadSuccess(method) {
            const message = document.createElement('div');
            message.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #10b981;
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 1000;
                font-size: 14px;
            `;
            message.textContent = `Image uploaded successfully using ${method === 'server' ? 'server storage' : 'local storage'}`;
            document.body.appendChild(message);
            
            setTimeout(() => {
                message.remove();
            }, 3000);
        }

        function selectSetting(element, setting) {
            const group = element.parentElement;
            group.querySelectorAll('.setting-card').forEach(card => {
                card.classList.remove('selected');
            });
            element.classList.add('selected');

            if (element.closest('.settings-section').querySelector('.section-title').textContent.includes('Privacy')) {
                collectionData.privacy = setting;
            } else if (element.closest('.settings-section').querySelector('.section-title').textContent.includes('Social')) {
                collectionData.socialSharing = setting;
            }

            updatePublishPreview();
        }

        function toggleFeature(element, feature) {
            element.classList.toggle('selected');

            if (element.classList.contains('selected')) {
                collectionData.features.add(feature);
            } else {
                collectionData.features.delete(feature);
            }
        }

        function updateURL() {
            const input = document.getElementById('urlSlug');
            const display = document.getElementById('urlDisplay');

            let slug = input.value || collectionData.title || 'untitled-collection';
            slug = slug.toLowerCase().replace(/[^a-z0-9]/g, '-').replace(/-+/g, '-').replace(/^-|-$/g, '');

            display.textContent = `https://www.crowd.com/cc/${slug}-987654`;
        }

        // Publish preview
        function updatePublishPreview() {
            const titleEl = document.getElementById('publishPreviewTitle');
            const subtitleEl = document.getElementById('publishPreviewSubtitle');
            const imageEl = document.getElementById('publishPreviewImage');

            titleEl.textContent = collectionData.title || 'Untitled Collection';

            const eventCount = selectedEvents.size;
            const privacy = collectionData.privacy === 'public' ? 'Public' : 'Unlisted';
            subtitleEl.textContent = `${eventCount} events • ${privacy} collection`;

            if (collectionData.image) {
                imageEl.style.backgroundImage = `url(${collectionData.image})`;
                imageEl.style.backgroundSize = 'cover';
                imageEl.style.backgroundPosition = 'center';
                imageEl.textContent = '';
            }
        }

        // UI updates
        function updateUI() {
            // Update selected events count
            document.getElementById('selectedEventsCount').textContent = `${selectedEvents.size} events selected`;

            // Update publish button state
            const canPublish = selectedEvents.size > 0 && collectionData.title.trim() !== '';
            document.getElementById('publishBtn').disabled = !canPublish;

            // Update checklist
            updatePublishChecklist();
        }

        function updatePublishChecklist() {
            const checklist = document.getElementById('publishChecklist');
            if (!checklist) return;

            const items = checklist.querySelectorAll('.checklist-item');

            // Events check
            if (selectedEvents.size > 0) {
                items[0].className = 'checklist-item completed';
                items[0].querySelector('.checklist-icon').textContent = '✓';
            } else {
                items[0].className = 'checklist-item pending';
                items[0].querySelector('.checklist-icon').textContent = '!';
            }

            // Title check
            if (collectionData.title.trim() !== '') {
                items[1].className = 'checklist-item completed';
                items[1].querySelector('.checklist-icon').textContent = '✓';
            } else {
                items[1].className = 'checklist-item pending';
                items[1].querySelector('.checklist-icon').textContent = '!';
            }
        }

        // Actions
        function saveAsDraft() {
            // Simulate saving
            alert('Collection saved as draft!');
        }

        function publishCollection() {
            if (selectedEvents.size === 0) {
                alert('Please select at least one event for your collection.');
                goToStep(1);
                return;
            }

            if (!collectionData.title.trim()) {
                alert('Please enter a title for your collection.');
                goToStep(2);
                return;
            }

            // Simulate publishing
            alert('🎉 Collection published successfully! Your collection is now live and discoverable.');

            // In a real app, this would redirect to the published collection
            console.log('Published collection data:', {
                ...collectionData,
                selectedEvents: Array.from(selectedEvents)
            });
        }

        function previewCollection() {
            // Simulate opening preview
            alert('Opening collection preview in new tab...');
        }

        // Initialize
        updateUI();
    </script>
</body>

</html>