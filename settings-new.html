<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - Crowd</title>
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="settings-new-styles.css">
    <script src="settings-new.js" defer></script>
    <script src="js/auth-api.js"></script>
</head>

<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-logo">
                <img src="logo.jpg" alt="Logo" style="height: 32px; width: auto; object-fit: contain;">
            </div>
            
            <nav class="sidebar-nav">
                <a href="dashboard-home.html" class="sidebar-item" title="Dashboard">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
                    </svg>
                </a>
                
                <a href="create-events.html" class="sidebar-item" title="Create Event">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
                    </svg>
                </a>
                
                <a href="analytics.html" class="sidebar-item" title="Analytics">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"/>
                    </svg>
                </a>
                
                <a href="marketing.html" class="sidebar-item" title="Marketing">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                    </svg>
                </a>

                <a href="orders.html" class="sidebar-item" title="Orders">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M7 4V2c0-.55-.45-1-1-1s-1 .45-1 1v2H3c-.55 0-1 .45-1 1s.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1V6h2c.55 0 1-.45 1-1s-.45-1-1-1H7zM12 4c.55 0 1-.45 1-1s-.45-1-1-1H9c-.55 0-1 .45-1 1s.45 1 1 1h3zm8 0c.55 0 1-.45 1-1s-.45-1-1-1h-3c-.55 0-1 .45-1 1s.45 1 1 1h3z"/>
                    </svg>
                </a>

                <a href="finance.html" class="sidebar-item" title="Finance">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/>
                    </svg>
                </a>

                <a href="AppMarketplace.html" class="sidebar-item" title="Apps">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z"/>
                    </svg>
                </a>
            </nav>
            
            <div class="sidebar-bottom">
                <a href="settings-new.html" class="sidebar-item active" title="Settings">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
                    </svg>
                </a>
                
                <button class="sidebar-item" id="logout-btn" title="Logout">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                    </svg>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <div class="main-content">
            <header class="header">
                <div class="header-content">
                    <h1 class="page-title">Settings</h1>
                    <div class="user-info" id="userInfo" style="display: none;">
                        <span id="userEmail">Loading...</span>
                    </div>
                    <div id="loginPrompt" style="display: none;">
                        <a href="login.html">Login</a>
                    </div>
                </div>
            </header>

        <main class="plans-content">
            <h2 class="main-title">Publish your events for free</h2>

            <div class="plan-toggle">
                <button class="toggle-btn active">Free</button>
                <button class="toggle-btn">Pro</button>
            </div>

            <div class="plan-details">
                <!-- Free Plan -->
                <div class="plan-card" id="free-plan">
                    <div class="plan-header">
                        <h3>Free</h3>
                        <div class="price">
                            <span class="currency">$</span>
                            <span class="amount">0</span>
                        </div>
                    </div>

                    <div class="plan-features">
                        <p class="feature-intro">All you need to stand out and sell more tickets:</p>
                        <ul>
                            <li>Publish unlimited events of any size</li>
                            <li>Custom event pages with multiple ticket types</li>
                            <li>Flexible payouts</li>
                            <li>Visibility on Eventbrite's marketplace</li>
                            <li>Detailed analytics and reporting</li>
                            <li>Built-in marketing tools</li>
                            <li>250 marketing email sends a day</li>
                            <li>Help Center and email support</li>
                            <li>24/7 chat support for paid events</li>
                        </ul>
                    </div>
                </div>

                <!-- Pro Plans (initially hidden) -->
                <div class="pro-plans" id="pro-plans">
                    <!-- Pro 2K Plan -->
                    <div class="plan-card pro-card">
                        <div class="plan-header">
                            <h3>Pro 2K</h3>
                            <div class="price">
                                <span class="currency">$</span>
                                <span class="amount">15</span>
                                <span class="period">per month</span>
                            </div>
                            <div class="save-info">
                                <span class="save-tag">Save 20%</span>
                                <span class="billing-period">when billed yearly</span>
                            </div>
                        </div>
                        <div class="plan-features">
                            <p class="feature-intro">Everything in Free, plus...</p>
                            <ul>
                                <li>Up to 2,000 daily marketing emails</li>
                                <li>24/7 chat support for any event</li>
                                <li>Cancel anytime</li>
                            </ul>
                        </div>
                        <button class="subscribe-btn">Subscribe now</button>
                    </div>

                    <!-- Pro 6K Plan -->
                    <div class="plan-card pro-card">
                        <div class="plan-header">
                            <h3>Pro 6K</h3>
                            <div class="price">
                                <span class="currency">$</span>
                                <span class="amount">50</span>
                                <span class="period">per month</span>
                            </div>
                            <div class="save-info">
                                <span class="save-tag">Save 20%</span>
                                <span class="billing-period">when billed yearly</span>
                            </div>
                        </div>
                        <div class="plan-features">
                            <p class="feature-intro">Everything in Free, plus...</p>
                            <ul>
                                <li>Up to 6,000 daily marketing emails</li>
                                <li>24/7 chat support for any event</li>
                                <li>Cancel anytime</li>
                            </ul>
                        </div>
                        <button class="subscribe-btn">Subscribe now</button>
                    </div>

                    <!-- Pro 10K Plan -->
                    <div class="plan-card pro-card">
                        <div class="plan-header">
                            <h3>Pro 10K</h3>
                            <div class="price">
                                <span class="currency">$</span>
                                <span class="amount">100</span>
                                <span class="period">per month</span>
                            </div>
                            <div class="save-info">
                                <span class="save-tag">Save 20%</span>
                                <span class="billing-period">when billed yearly</span>
                            </div>
                        </div>
                        <div class="plan-features">
                            <p class="feature-intro">Everything in Free, plus...</p>
                            <ul>
                                <li>Up to 10,000 daily marketing emails</li>
                                <li>24/7 chat support for any event</li>
                                <li>Cancel anytime</li>
                            </ul>
                        </div>
                        <button class="subscribe-btn">Subscribe now</button>
                    </div>
                </div>
            </div>

            <footer class="plans-footer">
                <p class="disclaimer">
                    *For all plans, ad spend and <a href="#">Ticketing Fees</a> may apply. Ticketing Fees are paid by
                    ticket buyers unless you choose to cover them.
                </p>
                <p class="learn-more">
                    <a href="#">Learn more about our pricing <span class="external-link-icon">↗</span></a>
                </p>
            </footer>
        </main>
        </div>
    </div>

    <script>
        // Authentication and user profile management
        async function loadUserProfile() {
            try {
                const user = await window.authAPI.getCurrentUser();
                const userInfo = document.getElementById('userInfo');
                const loginPrompt = document.getElementById('loginPrompt');
                const userEmail = document.getElementById('userEmail');
                
                if (user) {
                    userEmail.textContent = user.email;
                    userInfo.style.display = 'block';
                    loginPrompt.style.display = 'none';
                } else {
                    userInfo.style.display = 'none';
                    loginPrompt.style.display = 'block';
                }
            } catch (error) {
                console.error('Error loading user profile:', error);
                document.getElementById('userInfo').style.display = 'none';
                document.getElementById('loginPrompt').style.display = 'block';
            }
        }

        // Logout functionality
        async function logout() {
            try {
                await window.authAPI.logout();
                window.location.href = 'login.html';
            } catch (error) {
                console.error('Logout error:', error);
                window.location.href = 'login.html';
            }
        }

        // Load user profile on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadUserProfile();
            
            // Add logout button functionality
            const logoutBtn = document.getElementById('logout-btn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    if (confirm('Are you sure you want to log out?')) {
                        logout();
                    }
                });
            }
        });
    </script>
</body>

</html>