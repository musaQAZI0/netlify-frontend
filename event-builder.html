<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Build Event - Crowd</title>
    <link rel="stylesheet" href="event-builder-styles.css">
    <script src="js/config.js"></script>
    <script src="js/auth-utils.js"></script>
    <script src="js/google-places.js"></script>
    <script src="js/good-to-know.js"></script>
    <script src="js/event-builder.js"></script>
    <!-- Google Places API -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAiq2Anse5vuEDCI3oKqD2iezo1MfoOiVk&libraries=places&loading=async&callback=initGooglePlaces" async defer></script>
    
    <!-- Fallback initialization for demo without API key -->
    <script>
        // Initialize fallback mode when no API key is available
        window.addEventListener('load', () => {
            setTimeout(() => {
                if (!window.google && window.googlePlaces) {
                    console.log('ğŸ—ºï¸ Google Places API not loaded - using manual location entry mode');
                    window.googlePlaces.setupManualLocationEntry();
                    
                    // Show location details immediately for manual entry
                    const locationDetails = document.getElementById('locationDetails');
                    if (locationDetails) {
                        locationDetails.style.display = 'block';
                    }
                }
            }, 1000);
        });
    </script>
</head>
<body>
    <div class="builder-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-content">
                <div class="back-link">
                    <a href="dashboard-home.html">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M15 18l-6-6 6-6"/>
                        </svg>
                        Back to events
                    </a>
                </div>
                
                <div class="event-summary">
                    <div class="event-image-placeholder"></div>
                    <h2 id="eventTitleSidebar">Event Title</h2>
                    <div class="event-datetime">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                            <line x1="16" x2="16" y1="2" y2="6"/>
                            <line x1="8" x2="8" y1="2" y2="6"/>
                            <line x1="3" x2="21" y1="10" y2="10"/>
                        </svg>
                        <span id="eventDateTimeSidebar">Mon, Sep 1, 2025, 10:00 AM</span>
                    </div>
                    
                    <select class="status-select" id="eventStatus">
                        <option value="draft">Draft</option>
                        <option value="published">Published</option>
                    </select>
                    
                    <a href="#" class="preview-link" onclick="previewEvent()">Preview â†—</a>
                </div>

                <div class="steps-section">
                    <h3>Steps</h3>
                    <div class="step-item active" id="buildStep">
                        <div class="step-icon">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <circle cx="12" cy="12" r="10"/>
                            </svg>
                        </div>
                        <div class="step-content">
                            <h4>Build event page</h4>
                            <p>Add all of your event details and let attendees know what to expect</p>
                        </div>
                    </div>
                    
                    <div class="step-item" id="ticketsStep" onclick="goToTickets()" style="cursor: pointer;">
                        <div class="step-icon">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <circle cx="12" cy="12" r="10"/>
                            </svg>
                        </div>
                        <div class="step-content">
                            <h4>Add tickets</h4>
                            <p>Use our suggestions to help sell more tickets or manually create your own</p>
                        </div>
                    </div>
                    
                    <div class="step-item" id="publishStep" onclick="goToPublish()" style="cursor: pointer;">
                        <div class="step-icon">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <circle cx="12" cy="12" r="10"/>
                            </svg>
                        </div>
                        <div class="step-content">
                            <h4>Publish</h4>
                            <p>Review your event page and settings, then publish your event</p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-section">
                    <div class="dashboard-toggle">
                        <span>Dashboard</span>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7 10l5 5 5-5z"/>
                        </svg>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-content">
                    <div class="logo">
                        <img src="logo.jpg" alt="Event Platform" class="logo-img" style="height: 40px; width: auto;">
                    </div>
                    <div class="header-right">
                        <button class="preview-btn" onclick="previewEvent()">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                <circle cx="12" cy="12" r="3"/>
                            </svg>
                            Preview Your Event
                        </button>
                        <button class="publish-btn" onclick="goToPublish()">Publish</button>
                        <div class="more-dropdown">
                            <button class="more-btn">
                                More
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M7 10l5 5 5-5z"/>
                                </svg>
                            </button>
                        </div>
                        <div class="user-menu" onclick="toggleUserDropdown()">
                            <div class="user-avatar" id="userAvatar">U</div>
                            <span class="user-name" id="userName">User</span>
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M7 10l5 5 5-5z"/>
                            </svg>
                            <div class="user-dropdown" id="userDropdown" style="display: none;">
                                <a href="#" onclick="viewProfile()">View Profile</a>
                                <a href="#" onclick="accountSettings()">Account Settings</a>
                                <div class="dropdown-divider"></div>
                                <a href="#" onclick="logoutUser()">Logout</a>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Content Area -->
            <div class="content-area" id="contentArea">
                <!-- Build Event Page Content -->
                <div class="build-content" id="buildContent">
                    <div class="content-header">
                        <p class="content-subtitle">A short and sweet sentence about your event.</p>
                    </div>
                    
                    <div class="main-form">
                        <!-- Event Image Upload -->
                        <div class="image-upload-section">
                            <div class="image-upload-area" onclick="uploadImage()">
                                <div class="upload-placeholder" id="uploadPlaceholder">
                                    <div class="upload-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="#3b82f6">
                                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                            <polyline points="7,10 12,15 17,10"/>
                                            <line x1="12" x2="12" y1="15" y2="3"/>
                                        </svg>
                                    </div>
                                    <h3>Upload photos and video</h3>
                                </div>
                                <img id="eventImage" style="display: none; width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                            </div>
                            <div class="image-controls">
                                <div class="image-dots">
                                    <span class="dot active"></span>
                                    <span class="dot"></span>
                                    <span class="dot"></span>
                                </div>
                            </div>
                        </div>

                        <!-- Event Title -->
                        <div class="title-section">
                            <div class="add-button">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="#3b82f6">
                                    <line x1="12" x2="12" y1="5" y2="19"/>
                                    <line x1="5" x2="19" y1="12" y2="12"/>
                                </svg>
                            </div>
                            <h1 contenteditable="true" class="event-title" id="eventTitle" data-placeholder="Enter event title">Event Title</h1>
                        </div>

                        <!-- Date and Time / Location Section -->
                        <div class="details-grid">
                            <div class="details-section">
                                <div class="section-header">
                                    <h3>Date and time</h3>
                                    <div class="add-button">
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="#3b82f6">
                                            <line x1="12" x2="12" y1="5" y2="19"/>
                                            <line x1="5" x2="19" y1="12" y2="12"/>
                                        </svg>
                                    </div>
                                </div>
                                
                                <!-- Date and Time Inputs -->
                                <div class="datetime-inputs">
                                    <div class="input-group">
                                        <label for="eventDate">Date</label>
                                        <input type="date" id="eventDate" class="date-input">
                                    </div>
                                    <div class="input-group">
                                        <label for="startTime">Start Time</label>
                                        <input type="time" id="startTime" class="time-input">
                                    </div>
                                    <div class="input-group">
                                        <label for="endTime">End Time</label>
                                        <input type="time" id="endTime" class="time-input">
                                    </div>
                                </div>
                            </div>

                            <div class="details-section">
                                <div class="section-header">
                                    <h3>Location</h3>
                                    <div class="add-button">
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="#3b82f6">
                                            <line x1="12" x2="12" y1="5" y2="19"/>
                                            <line x1="5" x2="19" y1="12" y2="12"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="location-display">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                                        <circle cx="12" cy="10" r="3"/>
                                    </svg>
                                    <div class="location-text">
                                        <input type="text" class="location-input" id="locationInput" placeholder="Search for a venue or address">
                                    </div>
                                </div>
                                <div class="location-details" id="locationDetails" style="display: none; margin-top: 12px;">
                                    <div class="location-components">
                                        <div class="input-group">
                                            <label for="venueName">Venue Name</label>
                                            <input type="text" id="venueName" class="venue-input" placeholder="Venue name">
                                        </div>
                                        <div class="input-group">
                                            <label for="streetAddress">Street Address</label>
                                            <input type="text" id="streetAddress" class="address-input" placeholder="Street address">
                                        </div>
                                        <div class="input-row">
                                            <div class="input-group">
                                                <label for="cityName">City</label>
                                                <input type="text" id="cityName" class="city-input" placeholder="City">
                                            </div>
                                            <div class="input-group">
                                                <label for="stateName">State</label>
                                                <input type="text" id="stateName" class="state-input" placeholder="State">
                                            </div>
                                            <div class="input-group">
                                                <label for="zipCode">ZIP Code</label>
                                                <input type="text" id="zipCode" class="zip-input" placeholder="ZIP">
                                            </div>
                                        </div>
                                        <div class="input-group">
                                            <label for="countryName">Country</label>
                                            <input type="text" id="countryName" class="country-input" placeholder="Country" value="United States">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Event Category Section -->
                        <div class="category-selection-section">
                            <div class="section-header">
                                <h3>Event Category</h3>
                                <div class="add-button">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="#3b82f6">
                                        <line x1="12" x2="12" y1="5" y2="19"/>
                                        <line x1="5" x2="19" y1="12" y2="12"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="category-selection">
                                <select class="category-select" id="eventCategory">
                                    <option value="">Select a category</option>
                                    
                                    <!-- Original Categories (preserved exactly) -->
                                    <option value="music">ğŸµ Music</option>
                                    <option value="nightlife">ğŸŒƒ Nightlife</option>
                                    <option value="arts">ğŸ¨ Performing & Visual Arts</option>
                                    <option value="holidays">ğŸ“… Holidays</option>
                                    <option value="dating">ğŸ’• Dating</option>
                                    <option value="hobbies">ğŸ® Hobbies</option>
                                    <option value="business">ğŸ’¼ Business</option>
                                    <option value="food">ğŸ½ï¸ Food & Drink</option>
                                    <option value="other">ğŸ“‹ Other</option>
                                    
                                    <!-- Additional Arts & Entertainment -->
                                    <option value="comedy">ğŸ˜‚ Comedy</option>
                                    <option value="film">ğŸ¬ Film & Media</option>
                                    <option value="gaming">ğŸ® Gaming</option>
                                    <option value="theater">ğŸ­ Theater</option>
                                    <option value="dance">ğŸ’ƒ Dance</option>
                                    
                                    <!-- Business & Professional -->
                                    <option value="networking">ğŸ¤ Networking</option>
                                    <option value="conferences">ğŸ“Š Conferences</option>
                                    <option value="seminars">ğŸ“‹ Seminars & Workshops</option>
                                    <option value="career">ğŸ’¼ Career Development</option>
                                    <option value="entrepreneurship">ğŸš€ Entrepreneurship</option>
                                    
                                    <!-- Science & Technology -->
                                    <option value="tech">ğŸ’» Science & Tech</option>
                                    <option value="startup">ğŸš€ Startups</option>
                                    <option value="ai">ğŸ¤– AI & Innovation</option>
                                    <option value="web-development">ğŸŒ Web Development</option>
                                    <option value="cybersecurity">ğŸ”’ Cybersecurity</option>
                                    
                                    <!-- Health & Wellness -->
                                    <option value="health">ğŸ¥ Health & Wellness</option>
                                    <option value="fitness">ğŸ’ª Sports & Fitness</option>
                                    <option value="yoga">ğŸ§˜ Yoga & Meditation</option>
                                    <option value="mental-health">ğŸ§  Mental Health</option>
                                    <option value="nutrition">ğŸ¥— Nutrition</option>
                                    
                                    <!-- Education & Learning -->
                                    <option value="education">ğŸ“ Education</option>
                                    <option value="family">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Family & Education</option>
                                    <option value="language">ğŸ—£ï¸ Language Learning</option>
                                    <option value="skills">ğŸ› ï¸ Skill Development</option>
                                    <option value="academic">ğŸ“š Academic</option>
                                    
                                    <!-- Food & Drink (expanded) -->
                                    <option value="wine">ğŸ· Wine Tasting</option>
                                    <option value="cooking">ğŸ‘¨â€ğŸ³ Cooking Classes</option>
                                    <option value="beer">ğŸº Beer & Brewery</option>
                                    <option value="culinary">ğŸ´ Culinary Arts</option>
                                    
                                    <!-- Community & Social -->
                                    <option value="community">ğŸ˜ï¸ Community & Culture</option>
                                    <option value="charity">â¤ï¸ Charity & Causes</option>
                                    <option value="volunteer">ğŸ¤² Volunteer</option>
                                    <option value="social">ğŸ‘¥ Social</option>
                                    <option value="meetup">ğŸ‘« Meetup</option>
                                    
                                    <!-- Travel & Outdoor -->
                                    <option value="travel">âœˆï¸ Travel & Outdoor</option>
                                    <option value="adventure">ğŸ”ï¸ Adventure</option>
                                    <option value="nature">ğŸŒ² Nature & Environment</option>
                                    <option value="camping">ğŸ•ï¸ Camping</option>
                                    <option value="hiking">ğŸ¥¾ Hiking</option>
                                    
                                    <!-- Hobbies & Special Interest (expanded) -->
                                    <option value="crafts">âœ‚ï¸ Arts & Crafts</option>
                                    <option value="photography">ğŸ“¸ Photography</option>
                                    <option value="fashion">ğŸ‘— Fashion & Beauty</option>
                                    <option value="automotive">ğŸš— Auto, Boat & Air</option>
                                    <option value="collecting">ğŸº Collecting</option>
                                    <option value="books">ğŸ“– Books & Literature</option>
                                    
                                    <!-- Sports & Recreation -->
                                    <option value="sports">âš½ Sports</option>
                                    <option value="esports">ğŸ® Esports</option>
                                    <option value="running">ğŸƒ Running</option>
                                    <option value="cycling">ğŸš´ Cycling</option>
                                    <option value="swimming">ğŸŠ Swimming</option>
                                    
                                    <!-- Seasonal & Holiday (expanded) -->
                                    <option value="seasonal">ğŸƒ Seasonal</option>
                                    <option value="festivals">ğŸª Festivals</option>
                                    <option value="christmas">ğŸ„ Christmas</option>
                                    <option value="halloween">ğŸƒ Halloween</option>
                                    <option value="new-year">ğŸŠ New Year</option>
                                    
                                    <!-- Government & Politics -->
                                    <option value="government">ğŸ›ï¸ Government & Politics</option>
                                    <option value="activism">âœŠ Activism</option>
                                    <option value="civic">ğŸ—³ï¸ Civic Engagement</option>
                                    
                                    <!-- Religion & Spirituality -->
                                    <option value="religion">â›ª Religion & Spirituality</option>
                                    <option value="meditation">ğŸ•‰ï¸ Meditation</option>
                                </select>
                            </div>
                        </div>

                        <!-- Overview Section -->
                        <div class="overview-section">
                            <div class="section-header">
                                <h3>Overview</h3>
                                <div class="add-button">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="#3b82f6">
                                        <line x1="12" x2="12" y1="5" y2="19"/>
                                        <line x1="5" x2="19" y1="12" y2="12"/>
                                    </svg>
                                </div>
                            </div>
                            <textarea class="overview-description" id="overviewDescription" placeholder="Use this section to provide more details about your event. You can include things to know, venue information, accessibility optionsâ€”anything that will help people know what to expect."></textarea>
                        </div>

                        <!-- Good to Know Section -->
                        <div class="good-to-know-section">
                            <div class="section-header">
                                <h3>Good to know</h3>
                                <div class="add-button">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="#3b82f6">
                                        <line x1="12" x2="12" y1="5" y2="19"/>
                                        <line x1="5" x2="19" y1="12" y2="12"/>
                                    </svg>
                                </div>
                            </div>
                            
                            <div class="highlights-section">
                                <h4>Highlights</h4>
                                <div class="highlight-buttons">
                                    <button class="highlight-btn" onclick="addHighlight('age')">+ Add Age info</button>
                                    <button class="highlight-btn" onclick="addHighlight('door')">+ Add Door Time</button>
                                    <button class="highlight-btn" onclick="addHighlight('parking')">+ Add Parking info</button>
                                    <button class="highlight-btn" onclick="addHighlight('dresscode')">+ Add Dress Code</button>
                                    <button class="highlight-btn" onclick="addHighlight('accessibility')">+ Add Accessibility</button>
                                    <button class="highlight-btn" onclick="addHighlight('food')">+ Add Food & Drinks</button>
                                </div>
                                <div class="highlights-container" id="highlightsContainer">
                                    <!-- Dynamic highlights will be added here -->
                                </div>
                            </div>
                            
                            <div class="faq-section">
                                <h4>Frequently asked questions</h4>
                                <div class="faq-tip">
                                    <span class="tip-icon">ğŸ’¡</span>
                                    <span>Events with FAQs have 8% more organic traffic</span>
                                </div>
                                <div class="faq-container" id="faqContainer">
                                    <!-- Dynamic FAQs will be added here -->
                                </div>
                                <button class="add-question-btn" onclick="addFAQ()">+ Add question</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Save Button -->
            <div class="save-section">
                <button class="save-btn" onclick="saveAndContinue()">Save and continue</button>
            </div>
        </main>
    </div>

    <!-- Hidden file input for image upload -->
    <input type="file" id="imageInput" accept="image/*" style="display: none;" onchange="handleImageUpload(event)">

    <!-- The JavaScript is now in js/event-builder.js -->
</body>
</html>
