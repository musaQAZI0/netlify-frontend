<% title = 'Home - Crowd Events' %>

<div class="hero-section">
    <h1>Welcome to Crowd Events</h1>
    <p>Discover amazing events happening around you!</p>
    
    <% if (typeof isAuthenticated !== 'undefined' && isAuthenticated) { %>
        <div class="user-dashboard">
            <h2>Welcome back, <%= user.name || user.email %>!</h2>
            <div class="quick-actions">
                <a href="/dashboard" class="btn btn-primary">Go to Dashboard</a>
                <a href="/events/create" class="btn btn-secondary">Create Event</a>
            </div>
        </div>
    <% } else { %>
        <div class="auth-actions">
            <a href="/login" class="btn btn-primary">Login</a>
            <a href="/signup" class="btn btn-secondary">Sign Up</a>
        </div>
    <% } %>
</div>

<div class="featured-events">
    <h2>Featured Events</h2>
    <div class="events-grid">
        <!-- Events will be loaded here -->
        <p>Loading events...</p>
    </div>
</div>

<script>
// Load events dynamically
fetch('/api/events')
    .then(response => response.json())
    .then(data => {
        const eventsGrid = document.querySelector('.events-grid');
        if (data.events && data.events.length > 0) {
            eventsGrid.innerHTML = data.events.map(event => `
                <div class="event-card">
                    <h3>${event.title || 'Event'}</h3>
                    <p>${event.description || 'No description available'}</p>
                    <p><strong>Date:</strong> ${event.date || 'TBD'}</p>
                </div>
            `).join('');
        } else {
            eventsGrid.innerHTML = '<p>No events available at the moment.</p>';
        }
    })
    .catch(error => {
        console.error('Error loading events:', error);
        document.querySelector('.events-grid').innerHTML = '<p>Error loading events.</p>';
    });
</script>